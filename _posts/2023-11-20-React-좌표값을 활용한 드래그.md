---
layout: post
title: React 66장 - 좌표값을 활용한 드래그
author: admin
date: 2023-11-20 00:00:00 +900
lastmod: 2023-11-21  00:00:00 +900
sitemap:
  changefreq: monthly
  priority: 0.5
categories: [REACT]
tags: [react, components, jsx, drag, getboundingclientrect]
---

# React

[참고자료1](https://space-rumi.tistory.com/36)<br>
[참고자료2](https://jang8584.tistory.com/287)<br>

## 드래그 구현하기

- 페이지를 만들다보니 `drag` 기능을 구현하고 싶어졌다.
- 어떤 방법으로 시도할지 찾아보며 다양한 라이브러리를 보았지만, 처음 작성하다보니 내가 직접 작성하여 구현하고 싶었다.
- 내가 클릭하고 드래그 하는 이벤트가 발생할 때, 좌표값을 저장해놓았다가, 이동한 만큼의 거리를 컴포넌트의 위치값으로 활용하면 될 것 같았다.

### 요소 선택과 상태값 저장

```tsx
// useExample.ts

// 클릭했을 때 포인트 값
const [startPos, setStartPos] = useState({ x: 0, y: 0 });
// 포인트가 이동한 거리를 계산할 값
const [movePos, setMovePos] = useState({ left: 0, top: 0 });
// 요소 선택
const containerRef = useRef<HTMLDivElement>(null);
```

### 이벤트 작성

- 자료들을 찾아보며 `onDrag` 이벤트를 활용하여 작성한 코드도 보았다.
- 익숙하지 않은 이벤트였지만 대략적인 방법은 비슷해 보였고, 조금 더 익숙한 마우스 이벤트를 활용해보려고 했다.
- 따라하기 식으로 `useEffect`를 사용하고 이벤트와 `useEffect`와의 관계를 찾아보면서 마우스 이벤트와 발생하는 버그가 있고 이를 해결하기 위해 `useEffect`를 사용한다고 보았지만, 좌표값에 따른 `event`의 재호출을 위해 사용해야 하는 것인지, 직관적인 이벤트 실행을 위해 요소에 함수를 직접 설정하는 것과는 어떤 차이가 있는지 계속 알아보아야 한다.

```tsx
// example.tsx
<Container onMouseDown={}></Container>;

// useExample.ts
const;
```
